<!DOCTYPE html>
<html class="no-js">
    <head>
        <!--link to latest jquery-->
        <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>C-Breeze</title>
        <meta name="description" content="A web based project overviewer">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
        <!--links to stylesheets-->
        <link rel="stylesheet" href="uikit-2.10.0/css/uikit.min.css" />
        <link rel="stylesheet" href="css/materialize.css"  media="screen,projection"/>
        <link rel="stylesheet" href="css/custom.css">
        <!--links to js-->
        <!-- Materialize -->
        <script type="text/javascript" src="js/vendor/materialize.js"></script>
        <!-- first of many custom js files -->
        <script src="js/custom.js" type="text/javascript"></script>
        <!-- Vex Modals -->
        <script src="js/vendor/vex/vex.combined.min.js"></script>
        <script>vex.defaultOptions.className = 'vex-theme-plain';</script>
        <link rel="stylesheet" href="css/vendor/vex/vex.css" />
        <link rel="stylesheet" href="css/vendor/vex/vex-theme-plain.css" />
        <!-- UI kit -->
        <script src="uikit-2.10.0/js/uikit.min.js" type="text/javascript"></script>
        <script>
            var logstat = localStorage.getItem("loggedin");
            if (logstat != null) {
                var user = localStorage.getItem("currentuser");
                var userobj = JSON.parse(user);
                var name = userobj["username"];
                var colorcode = userobj["columncolor"];
//                console.log("Header.php colorcode: " + colorcode);
                var isadmin = userobj["isAdmin"];
                if (isadmin == 1){
                    var admin = true;
                } else {
                    var admin = false;
                }
            } else {
                window.location.href = "./login.html";
            }
            
        </script>
        <script src="js/colcards.js"></script>
        <script type="text/javascript">
            var colstring = localStorage.getItem("columns");
//            alert("Header columnstring: " + colstring);
            var columndata = JSON.parse(colstring);
            var cardstring = localStorage.getItem("cards");
            var carddata = JSON.parse(cardstring);
        </script>
        <script src="js/vendor/moment.js" type="text/javascript"></script>
        <script type="text/javascript" src="js/helper.js"></script>
        <script type="text/javascript" src="js/formatcard.js"></script>
        <script type="text/javascript" src="js/addcard.js"></script>
    </head>
    <body>
        <!-- Dropdown Structure -->
        <ul id="dropdown1" class="dropdown-content">
            <li><a href="#!" onclick="popupsettings();">Settings</a></li>
            <li><a href="#!" onclick="logout();">Logout</a></li>
        </ul>
        <nav class="light-blue">
            <div class="">
                <div class="nav-wrapper"><a id="logo-container" href="#" class="brand-logo">Carpenter Point</a>
                    <ul id="nav-mobile" class="right side-nav">
                        <li><a href="#"></a></li>
                        <li><a class="dropdown-button" href="#!" id="username" data-activates="dropdown1">Username<i class="mdi-navigation-arrow-drop-down right"></i></a></li>
                    </ul><a href="#" data-activates="nav-mobile" class="button-collapse"><i class="mdi-navigation-menu"></i></a>
                </div>
            </div>
        </nav>
        <!-- Settings Modal -->
        <div id="settingsModal" class="modal">
            <div><!-- Removed class: uk-modal-dialog settings  -->
<!--                <div class=""></div> Removed class: uk-modal-close uk-close -->
                <ul class="tabs" id="setting-tabs-heads">
                    <li class="tab"><a href="#accountSettings">Account</a></li>
                    <script type="text/javascript">
                        if(admin){
                            $("#setting-tabs-heads").append("<li class='tab'><a href='#adminSettings'>Admin</a></li>");
                            $("#setting-tabs-heads").append("<li class='tab'><a href='#login-info'>Info</a></li>");
                        }
                    </script>
                </ul>
                <!-- SETTINGS -->
                <ul id="settings-tabs" class=""><!-- Removed class: uk-switcher -->
                    <li id="accountSettings" class="tab-content">
                        <form class="uk-form-horizontal" >
                            <fieldset>
                                <h1>Account settings</h1>
                                <div class="panel input-field">
                                    <label class="uk-form-label">Set Name:</label>
                                    <input type="text" id="username-input">
<!--                                    <span class="uk-form-help-inline"></span>-->
                                </div>
                                <br/>
                                <div class="panel">
                                    <h5>Password Reset:</h5>
                                    <div class="input-field">
                                        <label class="uk-form-label">Current Password:</label>
                                        <input type="password" id="oldpass">
                                    </div>
                                    <div class="input-field">
                                        <label class="uk-form-label">New Password:</label>
                                        <input type="password" id="newpass">
                                    </div>
                                    <div class="input-field">
                                        <label class="uk-form-label">Confirm New Password:</label>
                                        <input type="password" id="newpassconf">
                                    </div>
                                </div>
                                <br/>
                                <div class="panel input-field">
                                    <label class="uk-form-label">Color Scheme:</label>
                                    <select id="colorSelect" class="disabled"></select>
                                    <div class="colorBox"></div>
                                </div>
                                <div>
                                    <button type="button" id="general-settings-btn" class="uk-button-primary uk-button-large button">Save Changes</button>
                                </div>
                            </fieldset>
                        </form>
                    </li>
                    <li id="adminSettings" class="tab-content panel white">
                        <div class="row">
                            <form class="col s12">
                                <fieldset>
                                    <div class="row">
                                        <h1>Admin Settings</h1>
                                        <div class="panel">
                                            <h5>Add Users:</h5>
                                            <div class="input-field col s6">
                                                <label>New User Email:</label>
                                                <input type="email" id="admin-add-email">
                                            </div>
                                            <div class="input-field col s2">
                                                <p>
                                                    <label class="uk-form-label" for="admin-add-admin">Is this user an Administrator?</label>
                                                    <input type="radio" name="admin-status" id="admin-add-admin" value="admin">
                                                </p>
                                            </div>
                                            <div class="input-field col s4">
                                                <button type="button" id="admin-add-user" class="waves-effect waves-light btn">Add user</button>
                                            </div>
                                        </div>
                                    </div>
                                    <br/>
                                    <div class="row">
                                        <h5>Remove a User:</h5>
                                        <div class="input-field col s4">
                                            <label class="uk-form-label">User's Email:</label>
                                            <input type="email" id="admin-remove-email">
                                        </div>
                                        <div class="input-field col s4">
                                            <label class="uk-form-label">Confirm User's Email:</label>
                                            <input type="email" id="admin-remove-email-conf">
                                        </div>
                                        <div class="input-field col s4">
                                            <button type="button" id="admin-remove-user" class="waves-effect waves-light btn">Remove user</button>
                                        </div>
                                    </div>
                                    <br/>
                                    <div class="panel">
                                        <h5>Add Column:</h5>
                                        <div class="input-field">
                                            <label class="uk-form-label">Column Name:</label>
                                            <input type="text" id="admin-add-column-name">
                                        </div>
                                        <div class="input-field">
                                            <label>Column Order:</label>
                                            <input type="number" id="admin-add-column-order" min="1">
                                            <button type="button" id="admin-add-column" class="waves-effect waves-light btn">Add Column</button>
                                        </div>
                                    </div>
                                    </br>
                                    <div class="panel input-field">
                                        <label class="uk-form-label">Remove Column:</label>
                                        <select id="admin-remove-column-name">
                                            <script>
                                                var addedstring = "";
                                                for(i=0; i<columndata.length; i++){
                                                    addedstring += "<option>"+columndata[i].columnname+"</option>";
                                                }
                                                var select = document.getElementById("admin-remove-column-name");
                                                select.innerHTML = addedstring;
                                            </script>
                                        </select>
                                        <button type="button" id="admin-remove-column" class="waves-effect waves-light btn">Remove Column</button>
                                    </div>
                                    </br>
                                    <div class="">
                                        <button type="button" class="waves-effect waves-light btn" onclick="popupformatcard();" id="make-card-btn">Edit Card Format</button>
                                    </div>
                                </fieldset>
                        </form>
                    </div>
                </li>  
                    <li id="login-info" class="tab-content">
                        <div class="panel">
                            <ul>
                                <li>Initial password for new users is "seamonkey". Make sure users change password upon initial login.</li>
                            </ul>
                        </div>
                    </li>                                    
                </ul>
                <a href="#" class="waves-effect btn modal-close">Close</a>
            </div>
            <!--end settings modal-->
        </div>

        <script type="text/javascript">
            var unelem = document.getElementById("username");
            unelem.innerHTML = name;

            function logout(){
                localStorage.removeItem("currentuser");
                localStorage.removeItem("loggedin");
                localStorage.removeItem("columns");
                localStorage.removeItem("cards");
                window.location.href = "./login.html";
            }
        </script>
        <script type="text/javascript">
            function popupsettings(){
                //show the settings popup!
                $('#settingsModal').openModal();
            }
        </script>
        <script type="text/javascript">
            $( document ).ready(function() {
                $(".button-collapse").sideNav();
                $('.button-collapse').sideNav({menuWidth: 240, activationWidth: 70});
                $(".dropdown-button").dropdown();
                $('ul.tabs').tabs();
            });    
        </script>

    </body>
</html>

